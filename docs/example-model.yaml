# NON-OPTIONAL 
id: ExampleModel
# identifier has no spaces. It is assumed to be unique.
name: Example Model
maintainer: 
    - name: Jataware
      email: contact@jataware.com

author: 
    - name: Brandon
      email: brandon@jataware.com
    - name: Justin
      email: j@jata.com
      
version: 1.0.0

# The model description can be multi-line. White space will be preserved if the 
# | character is used prior to writing the description.

description: |
  This is an example model description which uses rainfall to predict flood risk.
  New lines and indententation will be preserved in this description.

############################################### 
# Information useful for execution [OPTIONAL]
sourceCode: https://github.com/WorldModelers/ModelService

memoryRequirements: |
  This is some text with instructions on the memory requirements.
  
operatingSystems: 
    - Unix

processorRequirements: |
  This is some text about the GPUs/processing power needed for this model.
  
softwareRequirements: |
  This is some text about the Software dependencies of the model.
  
containerId: modelservice/rain:v2

# Information useful for findability [OPTIONAL]
contributor:
    - name: Daniel Garijo
      email: dgarijo@isi.edu

keywords:
    - rainfall
    - precipitation
    - flooding

license: https://opensource.org/licenses/MIT
    
date: 01-01-2019

website: http://pageofTheModel.org
# [END OPTIONAL SECTION]
############################################### 


inputs:
  - name: rainfall
    description: >
      This input contains information about rainfall/precipitation 
      for a specified geography.
    format: CSV
    variables:
      # Only need to specify variables that are used by the model
      - name: precipitation
        description: total precipitation (rainfall) in the area
        # Specify at least one standard variable
        standard_variables: 
          - name: rain
            ontology: AGROVOC
            uri: http://aims.fao.org/aos/agrovoc/c_6435.html
          - name: precipitation
            ontology: AGROVOC
            uri: http://aims.fao.org/aos/agrovoc/c_6161
        # Optional: specify arbitrary metadata, such as units     
        metadata:
          units: mm
      - name: district
        description: the district of coverage for the precipitation variable
        standard_variables:
          - name: area
            ontology: AGROVOC
            URI: http://aims.fao.org/aos/agrovoc/c_330588
      - name: date
        description: the date for the precipitation recording
        standard_variables:
          - name: date
            ontology: schema.org
            uri: https://schema.org/Date
    # a file (or files) that can be used as input to the model. They all have the variables described above
    # each example is related to an input
    - example: 
        - name:rainfall_Pongo.csv
        #location may be a local path too such as /data/rainfall.csv
          location: http://example.org/rainfalPongo.csv
          description: >
            This file contains information about rainfall/precipitation 
            for the region of Pongo.
      
            # Optional: specify geospatial coverage
            # Geographic bounding box is specified as a  4-element numeric array 
            # (in WGS84 coordinate system) [xmin, ymin, xmax, ymax]
            # As a reminder, x is longitude, y is latitude
          patial_coverage:
            - xmin: 36.386719
            - ymin: 6.140555
            - xmax: 41.572266
            - ymax: 11.350797
            # Optional: specify temporal coverage
            # Format should be YYYY-MM-DDTHH:MM:SS
          temporal_coverage:
            - start_time: "2012-01-01T00:00:00"
            - end_time: "2019-01-01T23:59:59"
        - name:rainfall_Ethiopia.csv
        #location may be a local path too such as /data/rainfall.csv
          location: http://example.org/rainfalEth.csv
          description: >
            This file contains information about rainfall/precipitation 
            for the region of Ethipia.
      
            # Optional: specify geospatial coverage
            # Geographic bounding box is specified as a  4-element numeric array 
            # (in WGS84 coordinate system) [xmin, ymin, xmax, ymax]
            # As a reminder, x is longitude, y is latitude
            
          patial_coverage:
            - xmin: 40.386719
            - ymin: 6.140555
            - xmax: 25.572266
            - ymax: 11.350797
            # Optional: specify temporal coverage
            # Format should be YYYY-MM-DDTHH:MM:SS
          temporal_coverage:
            - start_time: "2015-01-01T00:00:00"
            - end_time: "2016-01-01T23:59:59"
    

outputs:
  #no need to give sample outputs, as they are generated by the model.
  - name: flood_risk
    description: A file containing flood risk scores per district for the coming year.
    format: CSV
    metadata:  
      spatial_coverage:
        - xmin: 36.386719
        - ymin: 6.140555
        - xmax: 41.572266
        - ymax: 11.350797      
    variables:
      - name: risk_score
        description: >
          A continuous score, on a scale of 0 to 1, which indicates the degree of risk
          that a given district faces for flooding. A 1 indicates iminent risk; a 0 indicates
          no risk.
        standard_variables:
          - name: risk
            ontology: AGROVOC
            uri: http://aims.fao.org/aos/agrovoc/c_6612
      - name: district
        description: the district of coverage for the precipitation variable
        standard_variables:
          - name: area
            ontology: AGROVOC
            URI: http://aims.fao.org/aos/agrovoc/c_330588

parameters:
  # Specify the minimum parameters that should be user-specified to execute a model run
  # Note that each parameter should have a default option provided. 
  # Descriptions for each parameter are optional
  # Each parameter should be on of the following types:
  # - NumberParameter
  # - ChoiceParameter
  # - TimeParameter
  # - GeoParameter
  # - StringParameter
  - name: rainfall_perturbation
    description: >
      The degree to perturb rainfall from the baseline model. This should be a real number, 
      which, if 0, would indicate no rainfall in any district. If 1 it would indicate rainfall
      matching baseline estimates. 1.25 would indicate a 25% increase in rainfall from off the
      baseline estimate.
    metadata:
      # Note: NumberParameter could be a float or integer depending on what the model
      # expects
      type: NumberParameter
    default: 1
    #minimum/maximum values for the parameter [OPTIONAL]
    minumum: 0
    maximum: 50
  - name: deforestation
    description: Select the extent to which deforestation occurs in the forecast area.
    metadata:
      type: ChoiceParameter
      choices:
        - low
        - medium
        - high
    default: low
  - name: time
    description: >
      Choose the time range over which to train the model. Allows for the exclusion
      of extreme or outlier events.
    metadata:
      type: TimeParameter
      # Note: TimeParameter format should be whatever is expected by the model
      # TimeParameter is, therefore, not a specified time format 
    default: 2012-01-01-2019-01-01
  - name: geography
    description: Constrain model forecast to a specific geography
    metadata:
      type: GeoParameter
      # Note: the GeoParameter format should be whatever is expected by the model
      # GeoParameter is, therefore, not a specified geo format       
      default:
        {
          "coordinates":
            [
              [
                [6.140555, 36.386719], 
                [11.350797, 36.386719], 
                [11.350797, 41.572266], 
                [6.140555, 41.572266]
              ]
            ],
          "type": "Polygon",
        }
  - name: district
    description: Select a specific district to forecast, by name
    metadata:
      type: StringParameter
    default: All